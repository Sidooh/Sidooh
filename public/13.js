(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{111:function(t,e,r){"use strict";r.r(e);var a=r(11),s=r(1);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={name:"Index",components:{CChartLine:a.CChartLine},data:function(){return{fields:[{key:"id"},{key:"referee_phone"},{key:"status"},{key:"created_at"}],options:{maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},stacked:!1,scales:{y:{type:"linear",display:!0,position:"left"},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1}}}}}},created:function(){var t=this;this.groupReferrals("y"),this.fetchReferrals().then((function(){t.processReferralChartData()}))},destroyed:function(){this.resetState()},computed:o(o({},Object(s.c)("ReferralsIndex",{data:"data",referralsChartData:"chartData",referralsQuery:"query",referralsTotal:"total",activeReferrals:"activeReferrals"})),{},{chartLabels:function(){return this.referralsChartData.map((function(t){return t.date}))},chartData:function(){return this.referralsChartData.map((function(t){return t.count}))},totalReferrals:function(){return this.data.length},totalReferralsToday:function(){var t=this;return this.data.filter((function(e){return t.isToday(new Date(e.created_at))})).length},totalReferralsThisMonth:function(){var t=this;return this.data.filter((function(e){return t.isThisMonth(new Date(e.created_at))})).length},datasets:function(){return[{data:this.chartData,backgroundColor:"#008",borderColor:"#00c",label:"Count",fill:!1}]}}),methods:o(o({},Object(s.b)("ReferralsIndex",{fetchReferrals:"fetchData",processReferralChartData:"processChartData",setQuery:"setQuery",resetState:"resetState"})),{},{groupReferrals:function(t){var e=Object.assign({},this.referralsQuery,{group:t,yearLimit:!0});this.setQuery(e),this.processReferralChartData()},isToday:function(t){var e=new Date;return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},isThisMonth:function(t){var e=new Date;return t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},rowClicked:function(t,e,r){this.$emit("row-clicked",t,e,r)},getBadge:function(t){return"success"===t?"success":"pending"===t?"secondary":"reimbursed"===t?"warning":"failed"===t?"danger":"primary"}})},l=r(3),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("CCard",[r("CCardBody",[r("CRow",[r("CCol",{staticClass:"col-sm-5"},[r("h4",{staticClass:"card-title mb-0"},[t._v("Invites Summary")]),t._v(" "),r("div",{staticClass:"small text-muted"},[t._v(t._s("d"===t.referralsQuery.group?"Invites done today":"m"===t.referralsQuery.group?"Invites done this month":"Invites done this year")+"\n                    ")])]),t._v(" "),r("CCol",{staticClass:"d-none d-md-block col-sm-7"},[r("button",{staticClass:"btn float-right btn-primary"},[r("CIcon",{attrs:{name:"cil-cloud-download"}})],1),t._v(" "),r("CButtonGroup",{staticClass:"float-right mr-3 btn-group"},[r("CButton",{staticClass:"btn mx-0 btn-outline-secondary",class:["d"===t.referralsQuery.group?"active":""],on:{click:function(e){return t.groupReferrals("d")}}},[t._v("\n                            Day\n                        ")]),t._v(" "),r("button",{staticClass:"btn mx-0 btn-outline-secondary",class:["m"===t.referralsQuery.group?"active":""],on:{click:function(e){return t.groupReferrals("m")}}},[t._v("\n                            Month\n                        ")]),t._v(" "),r("button",{staticClass:"btn mx-0 btn-outline-secondary",class:["y"===t.referralsQuery.group?"active":""],on:{click:function(e){return t.groupReferrals("y")}}},[t._v("\n                            Year\n                        ")])],1)],1)],1),t._v(" "),r("CChartLine",{staticStyle:{height:"300px","margin-top":"40px"},attrs:{datasets:t.datasets,labels:t.chartLabels,options:t.options}})],1),t._v(" "),r("CCardFooter",[r("CRow",{staticClass:"text-center"},[r("CCol",{attrs:{sclass:"mb-sm-2 mb-0 col-sm-12 col-md"}},[r("div",{staticClass:"text-muted"},[t._v("Total Invites")]),t._v(" "),r("strong",[t._v(t._s(t.totalReferrals))]),t._v(" "),r("span",{attrs:{title:"Today's Invites"}},[t._v("("+t._s(t.totalReferralsToday)+")")]),t._v(" "),r("CProgress",{staticClass:"progress-xs mt-2",attrs:{precision:1,value:t.totalReferrals,color:"success"}})],1)],1)],1)],1),t._v(" "),r("CCard",[r("CCardHeader",[t._t("header",[r("CIcon",{attrs:{name:"cil-grid"}}),t._v("\n                My Invites\n            ")])],2),t._v(" "),r("CCardBody",[r("CDataTable",{attrs:{fields:t.fields,items:t.data,"items-per-page":15,pagination:{doubleArrows:!1,align:"center"},"clickable-rows":"",hover:"","items-per-page-select":"",sorter:"",striped:"","table-filter":""},on:{"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"status",fn:function(e){return[r("td",[r("CBadge",{attrs:{color:t.getBadge(e.item.status)}},[t._v("\n                            "+t._s(e.item.status)+"\n                        ")])],1)]}}])})],1)],1)],1)}),[],!1,null,"3dd32ee4",null);e.default=u.exports}}]);