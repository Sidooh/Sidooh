(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{79:function(t,r,e){"use strict";e.r(r);var o=e(1),n=e.n(o),s=e(0);function a(t,r,e,o,n,s,a){try{var i=t[s](a),c=i.value}catch(t){return void e(t)}i.done?r(c):Promise.resolve(c).then(o,n)}function i(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,o)}return e}function c(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?i(Object(e),!0).forEach((function(r){l(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function l(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var u={name:"Login",data:function(){return{form:{phone:"",password:""},showError:!1,loading:!1,message:"",error:null}},computed:c({},Object(s.c)("auth",["isAuthenticated","errors"])),created:function(){this.isAuthenticated&&this.$router.push("/")},methods:c(c({},Object(s.b)("auth",["login"])),{},{checkPhone:function(t){if(t.valid){/^(?:\+?254|0)?((?:(?:7(?:(?:[01249][0-9])|(?:5[789])|(?:6[89])))|(?:1(?:[1][0-5])))[0-9]{6})$/.test(t.number)?(this.validPhoneInput=!0,this.error=null,this.form.phone=t.number.replace("+","")):(this.validPhoneInput=!1,this.error="Only Safaricom numbers are currently supported. Please try again.")}},submit:function(){var t,r=this;return(t=n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.login(r.form).then((function(t){console.log("success",t),r.showError=!1,r.$router.push("/")}),(function(t){console.log("error",t),t.error&&(r.showError=!0),r.loading=!1,r.message=t.response&&t.response.data||t.message||t.error||t.toString()}));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("loginVueError",t.t0),r.showError=!0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var r=this,e=arguments;return new Promise((function(o,n){var s=t.apply(r,e);function i(t){a(s,o,n,i,c,"next",t)}function c(t){a(s,o,n,i,c,"throw",t)}i(void 0)}))})()}})},p=e(2),d=Object(p.a)(u,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"c-app flex-row align-items-center"},[e("CContainer",[e("CRow",{staticClass:"justify-content-center"},[e("CCol",{attrs:{md:"8"}},[e("CCardGroup",[e("CCard",{staticClass:"p-4"},[e("CCardBody",[e("CForm",{on:{submit:function(r){return r.preventDefault(),t.submit(r)}}},[e("h1",[t._v("Login")]),t._v(" "),e("p",{staticClass:"text-muted"},[t._v("Sign In to your account")]),t._v(" "),e("p",{staticClass:"alert-info"},[t._v("If this is your first time accessing the web portal, please\n                                    register first.")]),t._v(" "),t.showError?e("p",{staticClass:"alert-warning",attrs:{id:"error"}},[t._v("Username or Password is\n                                    incorrect")]):t._e(),t._v(" "),e("vue-tel-input",{staticClass:"mt-3",attrs:{invalidMsg:t.error},on:{validate:t.checkPhone}}),t._v(" "),t.errors.phone?e("p",{staticClass:"alert-warning",attrs:{id:"phoneError"}},[t._v("\n                                    "+t._s(t.errors.phone[0])+"\n                                ")]):t._e(),t._v(" "),e("CInput",{staticClass:"mt-3 mb-0",attrs:{autocomplete:"curent-password",placeholder:"Password",type:"password"},scopedSlots:t._u([{key:"prepend-content",fn:function(){return[e("CIcon",{attrs:{name:"cil-lock-locked"}})]},proxy:!0}]),model:{value:t.form.password,callback:function(r){t.$set(t.form,"password",r)},expression:"form.password"}}),t._v(" "),t.errors.password?e("p",{staticClass:"alert-warning",attrs:{id:"passwordError"}},[t._v("\n                                    "+t._s(t.errors.password[0])+"\n                                ")]):t._e(),t._v(" "),e("CRow",[e("CCol",{staticClass:"text-left",attrs:{col:"6"}},[e("CButton",{staticClass:"px-4 mt-3",attrs:{color:"primary",type:"submit"}},[t._v("Login")])],1),t._v(" "),e("CCol",{staticClass:"text-right",attrs:{col:"6"}},[e("CButton",{staticClass:"px-0",attrs:{color:"link"}},[t._v("Forgot password?")]),t._v(" "),e("router-link",{attrs:{to:{name:"register"}}},[e("CButton",{staticClass:"d-lg-none",attrs:{color:"link"}},[t._v("Register now!")])],1)],1)],1)],1)],1)],1),t._v(" "),e("CCard",{staticClass:"text-center py-5 d-md-down-none",attrs:{"body-wrapper":"",color:"primary","text-color":"white"}},[e("CCardBody",[e("h2",[t._v("Sign up")]),t._v(" "),e("p",[t._v("Welcome to Sidooh")]),t._v(" "),e("router-link",{attrs:{to:{name:"register"}}},[e("CButton",{attrs:{color:"light",size:"lg",variant:"outline"}},[t._v("\n                                    Register Now!\n                                ")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);r.default=d.exports}}]);