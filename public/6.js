(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{251:function(t,e,n){"use strict";n.r(e);var a=n(13),r=n(2);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={name:"Index",components:{CChartLine:a.CChartLine},data:function(){return{fields:[{key:"earnings",label:"Amount"},{key:"type"},{key:"created_at",label:"Date"}],options:{maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},stacked:!1,scales:{y:{type:"linear",display:!0,position:"left"},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1}}}}}},created:function(){var t=this;this.fetchEarnings().then((function(){t.processEarningChartData()}))},destroyed:function(){},computed:o(o({},Object(r.c)("EarningsIndex",{data:"data",earningsChartData:"chartData",earningsQuery:"query",earningsTotal:"total"})),{},{chartLabels:function(){return this.earningsChartData.map((function(t){return t.date}))},chartData1:function(){return this.earningsChartData.map((function(t){return parseFloat(t.amount).toFixed(4)}))},chartData2:function(){return this.earningsChartData.map((function(t){return t.count}))},totalAmount:function(){return _.sum(this.data.map((function(t){return parseFloat(t.earnings)})))},totalAmountToday:function(){var t=this;return _.sum(this.data.filter((function(e){return t.isToday(new Date(e.created_at))})).map((function(t){return parseFloat(t.earnings)})))},totalAmountThisMonth:function(){var t=this;return _.sum(this.data.filter((function(e){return t.isThisMonth(new Date(e.created_at))})).map((function(t){return parseFloat(t.earnings)})))},totalEarnings:function(){return this.data.length},totalEarningsToday:function(){var t=this;return this.data.filter((function(e){return t.isToday(new Date(e.created_at))})).length},totalEarningsThisMonth:function(){var t=this;return this.data.filter((function(e){return t.isThisMonth(new Date(e.created_at))})).length},datasets:function(){return[{data:this.chartData1,backgroundColor:"#008",borderColor:"#00c",label:"Amount",fill:!1},{data:this.chartData2,backgroundColor:"#080",borderColor:"#0c0",label:"Count",fill:!1}]}}),methods:o(o({},Object(r.b)("EarningsIndex",{fetchEarnings:"fetchData",processEarningChartData:"processChartData",setQuery:"setQuery",resetState:"resetState"})),{},{groupEarnings:function(t){var e=Object.assign({},this.earningsQuery,{group:t,yearLimit:!1});this.setQuery(e),this.processEarningChartData()},isToday:function(t){var e=new Date;return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},isThisMonth:function(t){var e=new Date;return t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},rowClicked:function(t,e,n){this.$emit("row-clicked",t,e,n)},getBadge:function(t){return"self"===(t=t.toLowerCase())?"success":"referral"===t?"primary":"reimbursed"===t?"warning":"failed"===t?"danger":"secondary"},formatNumber:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return t.toFixed(e)}})},u=n(6),l=Object(u.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CCard",[n("CCardBody",[n("CRow",[n("CCol",{staticClass:"col-sm-5"},[n("h4",{staticClass:"card-title mb-0"},[t._v("Earnings Summary")]),t._v(" "),n("div",{staticClass:"small text-muted"},[t._v(t._s("d"===t.earningsQuery.group?"Earnings today":"m"===t.earningsQuery.group?"Earnings this month":"Earnings this year")+"\n                    ")])]),t._v(" "),n("CCol",{staticClass:"d-none d-md-block col-sm-7"},[n("CButtonGroup",{staticClass:"float-right mr-3 btn-group"},[n("CButton",{staticClass:"btn mx-0 btn-outline-secondary",class:["d"===t.earningsQuery.group?"active":""],on:{click:function(e){return t.groupEarnings("d")}}},[t._v("\n                            Day\n                        ")]),t._v(" "),n("button",{staticClass:"btn mx-0 btn-outline-secondary",class:["m"===t.earningsQuery.group?"active":""],on:{click:function(e){return t.groupEarnings("m")}}},[t._v("\n                            Month\n                        ")]),t._v(" "),n("button",{staticClass:"btn mx-0 btn-outline-secondary",class:["y"===t.earningsQuery.group?"active":""],on:{click:function(e){return t.groupEarnings("y")}}},[t._v("\n                            Year\n                        ")])],1)],1)],1),t._v(" "),n("CChartLine",{staticStyle:{height:"300px","margin-top":"40px"},attrs:{datasets:t.datasets,labels:t.chartLabels,options:t.options}})],1),t._v(" "),n("CCardFooter",[n("CRow",{staticClass:"text-center"},[n("CCol",{attrs:{sclass:"mb-sm-2 mb-0 col-sm-12 col-md"}},[n("div",{staticClass:"text-muted"},[t._v("Number of Earnings")]),t._v(" "),n("strong",[t._v(t._s(t._f("numFormat")(t.formatNumber(t.totalEarnings),"0,0")))]),t._v(" "),n("span",{attrs:{title:"Today's Number of Earnings"}},[t._v("("+t._s(t._f("numFormat")(t.formatNumber(t.totalEarningsToday),"0,0"))+")")]),t._v(" "),n("CProgress",{staticClass:"progress-xs mt-2",attrs:{precision:1,value:t.totalEarnings,color:"success"}})],1),t._v(" "),n("CCol",{attrs:{sclass:"mb-sm-2 mb-0 col-sm-12 col-md"}},[n("div",{staticClass:"text-muted"},[t._v("Total Amounts")]),t._v(" "),n("strong",[t._v(t._s(t._f("numFormat")(t.formatNumber(t.totalAmount),"0,0.0000")))]),t._v(" "),n("span",{attrs:{title:"Today's Transactions"}},[t._v("("+t._s(t._f("numFormat")(t.formatNumber(t.totalAmountToday),"0,0.0000"))+")")]),t._v(" "),n("CProgress",{staticClass:"progress-xs mt-2",attrs:{precision:1,value:t.totalAmountToday,color:"success"}})],1)],1)],1)],1),t._v(" "),n("CCard",[n("CCardHeader",[t._t("header",[n("CIcon",{attrs:{name:"cil-grid"}}),t._v("\n                My Earnings\n            ")])],2),t._v(" "),n("CCardBody",[n("CDataTable",{attrs:{fields:t.fields,items:t.data,"items-per-page":15,pagination:{doubleArrows:!1,align:"center"},"clickable-rows":"",hover:"","items-per-page-select":"",sorter:"",striped:"","table-filter":""},on:{"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"type",fn:function(e){return[n("td",[n("CBadge",{attrs:{color:t.getBadge(e.item.type)}},[t._v("\n                            "+t._s(e.item.type)+"\n                        ")])],1)]}}])})],1)],1)],1)}),[],!1,null,"71770872",null);e.default=l.exports}}]);