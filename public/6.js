(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{112:function(t,n,a){"use strict";a.r(n);var e=a(11),r=a(1);function s(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),a.push.apply(a,e)}return a}function o(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?s(Object(a),!0).forEach((function(n){i(t,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))}))}return t}function i(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}var c={name:"Index",components:{CChartLine:e.CChartLine},data:function(){return{fields:[{key:"earnings",label:"Amount"},{key:"type"},{key:"created_at",label:"Date"}],options:{maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},stacked:!1,scales:{y:{type:"linear",display:!0,position:"left"},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1}}}}}},created:function(){var t=this;this.groupEarnings("y"),this.fetchEarnings().then((function(){t.processEarningChartData()}))},destroyed:function(){},computed:o(o({},Object(r.c)("EarningsIndex",{data:"data",earningsChartData:"chartData",earningsQuery:"query",earningsTotal:"total"})),{},{chartLabels:function(){return this.earningsChartData.map((function(t){return t.date}))},chartData1:function(){return this.earningsChartData.map((function(t){return parseFloat(t.amount).toFixed(4)}))},chartData2:function(){return this.earningsChartData.map((function(t){return t.count}))},totalAmount:function(){return _.sum(this.data.map((function(t){return parseFloat(t.earnings)}))).toFixed(4)},totalAmountToday:function(){var t=this;return _.sum(this.data.filter((function(n){return t.isToday(new Date(n.created_at))})).map((function(t){return parseFloat(t.earnings)}))).toFixed(4)},totalAmountThisMonth:function(){var t=this;return _.sum(this.data.filter((function(n){return t.isThisMonth(new Date(n.created_at))})).map((function(t){return parseFloat(t.earnings)}))).toFixed(4)},totalEarnings:function(){return this.data.length},totalEarningsToday:function(){var t=this;return this.data.filter((function(n){return t.isToday(new Date(n.created_at))})).length},totalEarningsThisMonth:function(){var t=this;return this.data.filter((function(n){return t.isThisMonth(new Date(n.created_at))})).length},datasets:function(){return[{data:this.chartData1,backgroundColor:"#008",borderColor:"#00c",label:"Amount",fill:!1},{data:this.chartData2,backgroundColor:"#080",borderColor:"#0c0",label:"Count",fill:!1}]}}),methods:o(o({},Object(r.b)("EarningsIndex",{fetchEarnings:"fetchData",processEarningChartData:"processChartData",setQuery:"setQuery",resetState:"resetState"})),{},{groupEarnings:function(t){var n=Object.assign({},this.earningsQuery,{group:t,yearLimit:!1});this.setQuery(n),this.processEarningChartData()},isToday:function(t){var n=new Date;return t.getDate()==n.getDate()&&t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()},isThisMonth:function(t){var n=new Date;return t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()},rowClicked:function(t,n,a){this.$emit("row-clicked",t,n,a)},getBadge:function(t){return"self"===(t=t.toLowerCase())?"success":"referral"===t?"primary":"reimbursed"===t?"warning":"failed"===t?"danger":"secondary"}})},u=a(3),l=Object(u.a)(c,(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",[a("CCard",[a("CCardBody",[a("CRow",[a("CCol",{staticClass:"col-sm-5"},[a("h4",{staticClass:"card-title mb-0"},[t._v("Earnings Summary")]),t._v(" "),a("div",{staticClass:"small text-muted"},[t._v(t._s("d"===t.earningsQuery.group?"Earnings today":"m"===t.earningsQuery.group?"Earnings this month":"Earnings this year")+"\n                    ")])]),t._v(" "),a("CCol",{staticClass:"d-none d-md-block col-sm-7"},[a("button",{staticClass:"btn float-right btn-primary"},[a("CIcon",{attrs:{name:"cil-cloud-download"}})],1),t._v(" "),a("CButtonGroup",{staticClass:"float-right mr-3 btn-group"},[a("CButton",{staticClass:"btn mx-0 btn-outline-secondary",class:["d"===t.earningsQuery.group?"active":""],on:{click:function(n){return t.groupEarnings("d")}}},[t._v("\n                            Day\n                        ")]),t._v(" "),a("button",{staticClass:"btn mx-0 btn-outline-secondary",class:["m"===t.earningsQuery.group?"active":""],on:{click:function(n){return t.groupEarnings("m")}}},[t._v("\n                            Month\n                        ")]),t._v(" "),a("button",{staticClass:"btn mx-0 btn-outline-secondary",class:["y"===t.earningsQuery.group?"active":""],on:{click:function(n){return t.groupEarnings("y")}}},[t._v("\n                            Year\n                        ")])],1)],1)],1),t._v(" "),a("CChartLine",{staticStyle:{height:"300px","margin-top":"40px"},attrs:{datasets:t.datasets,labels:t.chartLabels,options:t.options}})],1),t._v(" "),a("CCardFooter",[a("CRow",{staticClass:"text-center"},[a("CCol",{attrs:{sclass:"mb-sm-2 mb-0 col-sm-12 col-md"}},[a("div",{staticClass:"text-muted"},[t._v("Number of Earnings")]),t._v(" "),a("strong",[t._v(t._s(t._f("numFormat")(t.totalEarnings,"0,0")))]),t._v(" "),a("span",{attrs:{title:"Today's Number of Earnings"}},[t._v("("+t._s(t._f("numFormat")(t.totalEarningsToday,"0,0"))+")")]),t._v(" "),a("CProgress",{staticClass:"progress-xs mt-2",attrs:{precision:1,value:t.totalEarnings,color:"success"}})],1),t._v(" "),a("CCol",{attrs:{sclass:"mb-sm-2 mb-0 col-sm-12 col-md"}},[a("div",{staticClass:"text-muted"},[t._v("Total Amounts")]),t._v(" "),a("strong",[t._v(t._s(t._f("numFormat")(t.totalAmount,"0,0.0000")))]),t._v(" "),a("span",{attrs:{title:"Today's Transactions"}},[t._v("("+t._s(t._f("numFormat")(t.totalAmountToday,"0,0.0000"))+")")]),t._v(" "),a("CProgress",{staticClass:"progress-xs mt-2",attrs:{precision:1,value:t.totalAmountToday,color:"success"}})],1)],1)],1)],1),t._v(" "),a("CCard",[a("CCardHeader",[t._t("header",[a("CIcon",{attrs:{name:"cil-grid"}}),t._v("\n                My Earnings\n            ")])],2),t._v(" "),a("CCardBody",[a("CDataTable",{attrs:{fields:t.fields,items:t.data,"items-per-page":15,pagination:{doubleArrows:!1,align:"center"},"clickable-rows":"",hover:"","items-per-page-select":"",sorter:"",striped:"","table-filter":""},on:{"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"type",fn:function(n){return[a("td",[a("CBadge",{attrs:{color:t.getBadge(n.item.type)}},[t._v("\n                            "+t._s(n.item.type)+"\n                        ")])],1)]}}])})],1)],1)],1)}),[],!1,null,"3d78c218",null);n.default=l.exports}}]);